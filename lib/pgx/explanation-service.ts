import type { ExplanationInput, LanguageCode } from "./types"

interface Explanation {
  summary: string
  mechanism: string
  clinical_meaning: string
  safety_advice: string
  when_to_consult: string
}

interface ExplanationSet {
  clinician: Explanation
  patient: Explanation
}

const LANGUAGE_TEMPLATES: Record<
  LanguageCode,
  {
    clinician: (input: ExplanationInput) => Explanation
    patient: (input: ExplanationInput) => Explanation
  }
> = {
  "en-US": {
    clinician: (input) => ({
      summary: `Patient demonstrates ${input.phenotype} phenotype for ${input.gene} affecting ${input.drug} metabolism. Risk classification: ${input.risk_label} (CPIC Level ${input.cpic_level}).`,
      mechanism: `${input.gene} enzyme activity is altered in ${input.phenotype} phenotype, affecting the pharmacokinetic processing of ${input.drug}. This results in ${getMechanismDetail(input.phenotype, input.drug)}.`,
      clinical_meaning: `Based on CPIC Level ${input.cpic_level} evidence, this ${input.phenotype} phenotype carries ${input.severity} severity risk. Confidence score: ${input.confidence_score}.`,
      safety_advice: `${getRiskAdvice(input.risk_label, input.drug, "clinician", "en-US")}`,
      when_to_consult: `Pharmacogenomics specialist consultation recommended for ${input.risk_label === "Safe" ? "routine confirmation" : "therapy modification guidance"}.`,
    }),
    patient: (input) => ({
      summary: `Your body processes ${input.drug} differently than most people. Your genetic profile shows you are a ${input.phenotype} for the ${input.gene} gene.`,
      mechanism: `The ${input.gene} gene helps your body break down ${input.drug}. Your version of this gene works ${getPhenotypeSimple(input.phenotype)}, which changes how the medicine affects you.`,
      clinical_meaning: `This means ${input.drug} may ${getPatientImpact(input.risk_label)} for you. Your doctor rated this as "${input.risk_label}".`,
      safety_advice: `${getRiskAdvice(input.risk_label, input.drug, "patient", "en-US")}`,
      when_to_consult: `Talk to your doctor before ${input.risk_label === "Safe" ? "making any changes to your medication" : "taking this medication"}. Bring this report to your next appointment.`,
    }),
  },
  "hi-IN": {
    clinician: (input) => ({
      summary: `\u0930\u094B\u0917\u0940 ${input.gene} \u0915\u0947 \u0932\u093F\u090F ${input.phenotype} \u092B\u0947\u0928\u094B\u091F\u093E\u0907\u092A \u092A\u094D\u0930\u0926\u0930\u094D\u0936\u093F\u0924 \u0915\u0930\u0924\u093E \u0939\u0948, \u091C\u094B ${input.drug} \u091A\u092F\u093E\u092A\u091A\u092F \u0915\u094B \u092A\u094D\u0930\u092D\u093E\u0935\u093F\u0924 \u0915\u0930\u0924\u093E \u0939\u0948\u0964 \u091C\u094B\u0916\u093F\u092E \u0935\u0930\u094D\u0917\u0940\u0915\u0930\u0923: ${input.risk_label} (CPIC \u0938\u094D\u0924\u0930 ${input.cpic_level})\u0964`,
      mechanism: `${input.phenotype} \u092B\u0947\u0928\u094B\u091F\u093E\u0907\u092A \u092E\u0947\u0902 ${input.gene} \u090F\u0902\u091C\u093E\u0907\u092E \u0917\u0924\u093F\u0935\u093F\u0927\u093F \u092A\u0930\u093F\u0935\u0930\u094D\u0924\u093F\u0924 \u0939\u094B\u0924\u0940 \u0939\u0948, \u091C\u094B ${input.drug} \u0915\u0947 \u092B\u093E\u0930\u094D\u092E\u093E\u0915\u094B\u0915\u093E\u0907\u0928\u0947\u091F\u093F\u0915 \u092A\u094D\u0930\u0938\u0902\u0938\u094D\u0915\u0930\u0923 \u0915\u094B \u092A\u094D\u0930\u092D\u093E\u0935\u093F\u0924 \u0915\u0930\u0924\u0940 \u0939\u0948\u0964`,
      clinical_meaning: `CPIC \u0938\u094D\u0924\u0930 ${input.cpic_level} \u0938\u093E\u0915\u094D\u0937\u094D\u092F \u0915\u0947 \u0906\u0927\u093E\u0930 \u092A\u0930, \u092F\u0939 ${input.phenotype} \u092B\u0947\u0928\u094B\u091F\u093E\u0907\u092A ${input.severity} \u0917\u0902\u092D\u0940\u0930\u0924\u093E \u091C\u094B\u0916\u093F\u092E \u0935\u0939\u0928 \u0915\u0930\u0924\u093E \u0939\u0948\u0964 \u0935\u093F\u0936\u094D\u0935\u093E\u0938 \u0938\u094D\u0915\u094B\u0930: ${input.confidence_score}\u0964`,
      safety_advice: `${getRiskAdvice(input.risk_label, input.drug, "clinician", "hi-IN")}`,
      when_to_consult: `\u092B\u093E\u0930\u094D\u092E\u093E\u0915\u094B\u091C\u0947\u0928\u094B\u092E\u093F\u0915\u094D\u0938 \u0935\u093F\u0936\u0947\u0937\u091C\u094D\u091E \u0938\u0947 \u092A\u0930\u093E\u092E\u0930\u094D\u0936 \u0915\u0940 \u0938\u093F\u092B\u093E\u0930\u093F\u0936 \u0915\u0940 \u091C\u093E\u0924\u0940 \u0939\u0948\u0964`,
    }),
    patient: (input) => ({
      summary: `\u0906\u092A\u0915\u093E \u0936\u0930\u0940\u0930 ${input.drug} \u0915\u094B \u0905\u0927\u093F\u0915\u093E\u0902\u0936 \u0932\u094B\u0917\u094B\u0902 \u0938\u0947 \u0905\u0932\u0917 \u0924\u0930\u0940\u0915\u0947 \u0938\u0947 \u092A\u094D\u0930\u094B\u0938\u0947\u0938 \u0915\u0930\u0924\u093E \u0939\u0948\u0964 \u0906\u092A\u0915\u0940 \u0906\u0928\u0941\u0935\u0902\u0936\u093F\u0915 \u092A\u094D\u0930\u094B\u092B\u093E\u0907\u0932 \u0926\u0930\u094D\u0936\u093E\u0924\u0940 \u0939\u0948 \u0915\u093F \u0906\u092A ${input.gene} \u091C\u0940\u0928 \u0915\u0947 \u0932\u093F\u090F ${input.phenotype} \u0939\u0948\u0902\u0964`,
      mechanism: `${input.gene} \u091C\u0940\u0928 \u0906\u092A\u0915\u0947 \u0936\u0930\u0940\u0930 \u0915\u094B ${input.drug} \u0924\u094B\u0921\u093C\u0928\u0947 \u092E\u0947\u0902 \u092E\u0926\u0926 \u0915\u0930\u0924\u093E \u0939\u0948\u0964 \u0906\u092A\u0915\u0947 \u0907\u0938 \u091C\u0940\u0928 \u0915\u093E \u0938\u0902\u0938\u094D\u0915\u0930\u0923 ${getPhenotypeSimpleHindi(input.phenotype)} \u0915\u093E\u092E \u0915\u0930\u0924\u093E \u0939\u0948\u0964`,
      clinical_meaning: `\u0907\u0938\u0915\u093E \u092E\u0924\u0932\u092C \u0939\u0948 \u0915\u093F ${input.drug} \u0906\u092A\u0915\u0947 \u0932\u093F\u090F ${getPatientImpactHindi(input.risk_label)} \u0939\u094B \u0938\u0915\u0924\u093E \u0939\u0948\u0964 \u0906\u092A\u0915\u0947 \u0921\u0949\u0915\u094D\u091F\u0930 \u0928\u0947 \u0907\u0938\u0947 "${input.risk_label}" \u0915\u0947 \u0930\u0942\u092A \u092E\u0947\u0902 \u0930\u0947\u091F \u0915\u093F\u092F\u093E \u0939\u0948\u0964`,
      safety_advice: `${getRiskAdvice(input.risk_label, input.drug, "patient", "hi-IN")}`,
      when_to_consult: `\u092F\u0939 \u0926\u0935\u093E\u0908 \u0932\u0947\u0928\u0947 \u0938\u0947 \u092A\u0939\u0932\u0947 \u0905\u092A\u0928\u0947 \u0921\u0949\u0915\u094D\u091F\u0930 \u0938\u0947 \u092C\u093E\u0924 \u0915\u0930\u0947\u0902\u0964 \u092F\u0939 \u0930\u093F\u092A\u094B\u0930\u094D\u091F \u0905\u092A\u0928\u0940 \u0905\u0917\u0932\u0940 \u092E\u0941\u0932\u093E\u0915\u093E\u0924 \u092E\u0947\u0902 \u0932\u0947 \u091C\u093E\u090F\u0902\u0964`,
    }),
  },
  "bn-IN": {
    clinician: (input) => ({
      summary: `\u09B0\u09CB\u0997\u09C0 ${input.gene}-\u098F\u09B0 \u099C\u09A8\u09CD\u09AF ${input.phenotype} \u09AB\u09C7\u09A8\u09CB\u099F\u09BE\u0987\u09AA \u09AA\u09CD\u09B0\u09A6\u09B0\u09CD\u09B6\u09A8 \u0995\u09B0\u09C7, \u09AF\u09BE ${input.drug} \u09AC\u09BF\u09AA\u09BE\u0995\u0995\u09C7 \u09AA\u09CD\u09B0\u09AD\u09BE\u09AC\u09BF\u09A4 \u0995\u09B0\u09C7\u0964 \u099D\u09C1\u0981\u0995\u09BF \u09B6\u09CD\u09B0\u09C7\u09A3\u09C0\u09AC\u09BF\u09AD\u09BE\u0997: ${input.risk_label} (CPIC \u09B8\u09CD\u09A4\u09B0 ${input.cpic_level})\u0964`,
      mechanism: `${input.phenotype} \u09AB\u09C7\u09A8\u09CB\u099F\u09BE\u0987\u09AA\u09C7 ${input.gene} \u098F\u09A8\u099C\u09BE\u0987\u09AE \u0995\u09CD\u09B0\u09BF\u09AF\u09BC\u09BE\u0995\u09B2\u09BE\u09AA \u09AA\u09B0\u09BF\u09AC\u09B0\u09CD\u09A4\u09BF\u09A4 \u09B9\u09AF\u09BC, \u09AF\u09BE ${input.drug}-\u098F\u09B0 \u09AB\u09BE\u09B0\u09CD\u09AE\u09BE\u0995\u09CB\u0995\u09BE\u0987\u09A8\u09C7\u099F\u09BF\u0995 \u09AA\u09CD\u09B0\u0995\u09CD\u09B0\u09BF\u09AF\u09BC\u09BE\u0995\u09C7 \u09AA\u09CD\u09B0\u09AD\u09BE\u09AC\u09BF\u09A4 \u0995\u09B0\u09C7\u0964`,
      clinical_meaning: `CPIC \u09B8\u09CD\u09A4\u09B0 ${input.cpic_level} \u09AA\u09CD\u09B0\u09AE\u09BE\u09A3\u09C7\u09B0 \u09AD\u09BF\u09A4\u09CD\u09A4\u09BF\u09A4\u09C7, \u098F\u0987 ${input.phenotype} \u09AB\u09C7\u09A8\u09CB\u099F\u09BE\u0987\u09AA ${input.severity} \u09A4\u09C0\u09AC\u09CD\u09B0\u09A4\u09BE\u09B0 \u099D\u09C1\u0981\u0995\u09BF \u09AC\u09B9\u09A8 \u0995\u09B0\u09C7\u0964 \u09AC\u09BF\u09B6\u09CD\u09AC\u09BE\u09B8 \u09B8\u09CD\u0995\u09CB\u09B0: ${input.confidence_score}\u0964`,
      safety_advice: getRiskAdvice(input.risk_label, input.drug, "clinician", "bn-IN"),
      when_to_consult: `\u09AB\u09BE\u09B0\u09CD\u09AE\u09BE\u0995\u09CB\u099C\u09C7\u09A8\u09CB\u09AE\u09BF\u0995\u09CD\u09B8 \u09AC\u09BF\u09B6\u09C7\u09B7\u099C\u09CD\u099E\u09C7\u09B0 \u09B8\u09BE\u09A5\u09C7 \u09AA\u09B0\u09BE\u09AE\u09B0\u09CD\u09B6 \u09AA\u09CD\u09B0\u09B8\u09CD\u09A4\u09BE\u09AC\u09BF\u09A4\u0964`,
    }),
    patient: (input) => ({
      summary: `\u0986\u09AA\u09A8\u09BE\u09B0 \u09B6\u09B0\u09C0\u09B0 ${input.drug} \u0985\u09A8\u09CD\u09AF\u09A6\u09C7\u09B0 \u09A5\u09C7\u0995\u09C7 \u09AD\u09BF\u09A8\u09CD\u09A8\u09AD\u09BE\u09AC\u09C7 \u09AA\u09CD\u09B0\u0995\u09CD\u09B0\u09BF\u09AF\u09BC\u09BE \u0995\u09B0\u09C7\u0964 \u0986\u09AA\u09A8\u09BE\u09B0 \u099C\u09C7\u09A8\u09C7\u099F\u09BF\u0995 \u09AA\u09CD\u09B0\u09CB\u09AB\u09BE\u0987\u09B2 \u09A6\u09C7\u0996\u09BE\u09AF\u09BC \u09AF\u09C7 \u0986\u09AA\u09A8\u09BF ${input.gene} \u099C\u09BF\u09A8\u09C7\u09B0 \u099C\u09A8\u09CD\u09AF ${input.phenotype}\u0964`,
      mechanism: `${input.gene} \u099C\u09BF\u09A8 \u0986\u09AA\u09A8\u09BE\u09B0 \u09B6\u09B0\u09C0\u09B0\u0995\u09C7 ${input.drug} \u09AD\u09BE\u0999\u09CD\u0997\u09A4\u09C7 \u09B8\u09BE\u09B9\u09BE\u09AF\u09CD\u09AF \u0995\u09B0\u09C7\u0964`,
      clinical_meaning: `\u098F\u09B0 \u09AE\u09BE\u09A8\u09C7 ${input.drug} \u0986\u09AA\u09A8\u09BE\u09B0 \u099C\u09A8\u09CD\u09AF \u09AD\u09BF\u09A8\u09CD\u09A8\u09AD\u09BE\u09AC\u09C7 \u0995\u09BE\u099C \u0995\u09B0\u09A4\u09C7 \u09AA\u09BE\u09B0\u09C7\u0964 \u0986\u09AA\u09A8\u09BE\u09B0 \u09A1\u09BE\u0995\u09CD\u09A4\u09BE\u09B0 \u098F\u099F\u09BF\u0995\u09C7 "${input.risk_label}" \u09B9\u09BF\u09B8\u09C7\u09AC\u09C7 \u09B0\u09C7\u099F \u0995\u09B0\u09C7\u099B\u09C7\u09A8\u0964`,
      safety_advice: getRiskAdvice(input.risk_label, input.drug, "patient", "bn-IN"),
      when_to_consult: `\u098F\u0987 \u0994\u09B7\u09A7 \u09A8\u09C7\u0993\u09AF\u09BC\u09BE\u09B0 \u0986\u0997\u09C7 \u0986\u09AA\u09A8\u09BE\u09B0 \u09A1\u09BE\u0995\u09CD\u09A4\u09BE\u09B0\u09C7\u09B0 \u09B8\u09BE\u09A5\u09C7 \u0995\u09A5\u09BE \u09AC\u09B2\u09C1\u09A8\u0964`,
    }),
  },
  "ta-IN": {
    clinician: (input) => ({
      summary: `\u0BA8\u0BCB\u0BAF\u0BBE\u0BB3\u0BBF ${input.gene} \u0B95\u0BBE\u0BA9 ${input.phenotype} \u0BAA\u0BC0\u0BA9\u0BCB\u0B9F\u0BC8\u0BAA\u0BCD\u0BAA\u0BC8 \u0B95\u0BBE\u0B9F\u0BCD\u0B9F\u0BC1\u0B95\u0BBF\u0BB1\u0BBE\u0BB0\u0BCD, \u0B87\u0BA4\u0BC1 ${input.drug} \u0BB5\u0BB3\u0BB0\u0BCD\u0B9A\u0BBF\u0BA4\u0BC8\u0BAF\u0BC8 \u0BAA\u0BBE\u0BA4\u0BBF\u0B95\u0BCD\u0B95\u0BBF\u0BB1\u0BA4\u0BC1. \u0B86\u0BAA\u0BA4\u0BCD\u0BA4\u0BC1 \u0BB5\u0B95\u0BC8\u0BAA\u0BCD\u0BAA\u0BBE\u0B9F\u0BC1: ${input.risk_label} (CPIC \u0BA8\u0BBF\u0BB2\u0BC8 ${input.cpic_level}).`,
      mechanism: `${input.phenotype} \u0BAA\u0BC0\u0BA9\u0BCB\u0B9F\u0BC8\u0BAA\u0BCD\u0BAA\u0BBF\u0BB2\u0BCD ${input.gene} \u0BA8\u0BC6\u0BA9\u0BCD\u0B9A\u0BAE\u0BCD \u0B9A\u0BC6\u0BAF\u0BB2\u0BCD\u0BAA\u0BBE\u0B9F\u0BC1 \u0BAE\u0BBE\u0BB1\u0BCD\u0BB1\u0BAE\u0B9F\u0BC8\u0B95\u0BBF\u0BB1\u0BA4\u0BC1.`,
      clinical_meaning: `CPIC \u0BA8\u0BBF\u0BB2\u0BC8 ${input.cpic_level} \u0B86\u0BA4\u0BBE\u0BB0\u0BA4\u0BCD\u0BA4\u0BBF\u0BA9\u0BCD \u0BAA\u0B9F\u0BBF, \u0B87\u0BA8\u0BCD\u0BA4 ${input.phenotype} \u0BAA\u0BC0\u0BA9\u0BCB\u0B9F\u0BC8\u0BAA\u0BCD\u0BAA\u0BC1 ${input.severity} \u0BA4\u0BC0\u0BB5\u0BBF\u0BB0\u0BA4\u0BCD\u0BA4\u0BC8 \u0B95\u0BCA\u0BA3\u0BCD\u0B9F\u0BC1\u0BB3\u0BCD\u0BB3\u0BA4\u0BC1. \u0BA8\u0BAE\u0BCD\u0BAA\u0BBF\u0B95\u0BCD\u0B95\u0BC8 \u0BAE\u0BA4\u0BBF\u0BAA\u0BCD\u0BAA\u0BC6\u0BA3\u0BCD: ${input.confidence_score}.`,
      safety_advice: getRiskAdvice(input.risk_label, input.drug, "clinician", "ta-IN"),
      when_to_consult: `\u0BAA\u0BBE\u0BB0\u0BCD\u0BAE\u0B95\u0BCB\u0B9C\u0BC6\u0BA9\u0BCB\u0BAE\u0BBF\u0B95\u0BCD\u0BB8\u0BCD \u0BA8\u0BBF\u0BAA\u0BC1\u0BA3\u0BB0\u0BBF\u0BA9\u0BCD \u0B86\u0BB2\u0BCB\u0B9A\u0BA9\u0BC8 \u0BAA\u0BB0\u0BBF\u0BA8\u0BCD\u0BA4\u0BC1\u0BB0\u0BC8\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BC1\u0B95\u0BBF\u0BB1\u0BA4\u0BC1.`,
    }),
    patient: (input) => ({
      summary: `\u0B89\u0B99\u0BCD\u0B95\u0BB3\u0BCD \u0B89\u0B9F\u0BB2\u0BCD ${input.drug} \u0BAE\u0BB0\u0BC1\u0BA8\u0BCD\u0BA4\u0BC8 \u0BAE\u0BB1\u0BCD\u0BB1\u0BB5\u0BB0\u0BCD\u0B95\u0BB3\u0BBF\u0B9F\u0BAE\u0BBF\u0BB0\u0BC1\u0BA8\u0BCD\u0BA4\u0BC1 \u0BB5\u0BC7\u0BB1\u0BC1\u0BAA\u0B9F\u0BCD\u0B9F \u0BB5\u0BBF\u0BA4\u0BA4\u0BCD\u0BA4\u0BBF\u0BB2\u0BCD \u0B9A\u0BC6\u0BAF\u0BB2\u0BCD\u0BAA\u0B9F\u0BC1\u0BA4\u0BCD\u0BA4\u0BC1\u0B95\u0BBF\u0BB1\u0BA4\u0BC1.`,
      mechanism: `${input.gene} \u0BAE\u0BB0\u0BAA\u0BC1 \u0B89\u0B99\u0BCD\u0B95\u0BB3\u0BCD \u0B89\u0B9F\u0BB2\u0BBF\u0BB2\u0BCD ${input.drug} \u0BAE\u0BB0\u0BC1\u0BA8\u0BCD\u0BA4\u0BC8 \u0B89\u0B9F\u0BC8\u0B95\u0BCD\u0B95 \u0B89\u0BA4\u0BB5\u0BC1\u0B95\u0BBF\u0BB1\u0BA4\u0BC1.`,
      clinical_meaning: `\u0B87\u0BA4\u0BA9\u0BCD \u0BAA\u0BCA\u0BB0\u0BC1\u0BB3\u0BCD ${input.drug} \u0B89\u0B99\u0BCD\u0B95\u0BB3\u0BC1\u0B95\u0BCD\u0B95\u0BC1 \u0BB5\u0BC7\u0BB1\u0BC1\u0BAA\u0B9F\u0BCD\u0B9F \u0BB5\u0BBF\u0BA4\u0BA4\u0BCD\u0BA4\u0BBF\u0BB2\u0BCD \u0B95\u0BBE\u0BB0\u0BCD\u0BAF\u0BAA\u0B9F\u0BC1\u0BAE\u0BCD. \u0B89\u0B99\u0BCD\u0B95\u0BB3\u0BCD \u0BAE\u0BB0\u0BC1\u0BA4\u0BCD\u0BA4\u0BC1\u0BB5\u0BB0\u0BCD \u0B87\u0BA4\u0BC8 "${input.risk_label}" \u0B8E\u0BA9 \u0BAE\u0BA4\u0BBF\u0BAA\u0BCD\u0BAA\u0BBF\u0B9F\u0BCD\u0B9F\u0BC1\u0BB3\u0BCD\u0BB3\u0BBE\u0BB0\u0BCD.`,
      safety_advice: getRiskAdvice(input.risk_label, input.drug, "patient", "ta-IN"),
      when_to_consult: `\u0B87\u0BA8\u0BCD\u0BA4 \u0BAE\u0BB0\u0BC1\u0BA8\u0BCD\u0BA4\u0BC8 \u0B8E\u0B9F\u0BC1\u0BAA\u0BCD\u0BAA\u0BA4\u0BB1\u0BCD\u0B95\u0BC1 \u0BAE\u0BC1\u0BA9\u0BCD \u0B89\u0B99\u0BCD\u0B95\u0BB3\u0BCD \u0BAE\u0BB0\u0BC1\u0BA4\u0BCD\u0BA4\u0BC1\u0BB5\u0BB0\u0BBF\u0B9F\u0BAE\u0BCD \u0BAA\u0BC7\u0B9A\u0BC1\u0B99\u0BCD\u0B95\u0BB3\u0BCD.`,
    }),
  },
  "te-IN": {
    clinician: (input) => ({
      summary: `\u0C30\u0C4B\u0C17\u0C3F ${input.gene} \u0C15\u0C4B\u0C38\u0C02 ${input.phenotype} \u0C2B\u0C40\u0C28\u0C4B\u0C1F\u0C48\u0C2A\u0C4D\u200C\u0C28\u0C41 \u0C2A\u0C4D\u0C30\u0C26\u0C30\u0C4D\u0C36\u0C3F\u0C38\u0C4D\u0C24\u0C41\u0C28\u0C4D\u0C28\u0C3E\u0C30\u0C41, \u0C07\u0C26\u0C3F ${input.drug} \u0C1C\u0C40\u0C35\u0C15\u0C4D\u0C30\u0C3F\u0C2F\u0C28\u0C41 \u0C2A\u0C4D\u0C30\u0C2D\u0C3E\u0C35\u0C3F\u0C24\u0C02 \u0C1A\u0C47\u0C38\u0C4D\u0C24\u0C41\u0C02\u0C26\u0C3F. \u0C30\u0C3F\u0C38\u0C4D\u0C15\u0C4D \u0C35\u0C30\u0C4D\u0C17\u0C40\u0C15\u0C30\u0C23: ${input.risk_label} (CPIC \u0C38\u0C4D\u0C25\u0C3E\u0C2F\u0C3F ${input.cpic_level}).`,
      mechanism: `${input.phenotype} \u0C2B\u0C40\u0C28\u0C4B\u0C1F\u0C48\u0C2A\u0C4D\u200C\u0C32\u0C4B ${input.gene} \u0C0E\u0C02\u0C1C\u0C48\u0C2E\u0C4D \u0C15\u0C4D\u0C30\u0C3F\u0C2F\u0C3E\u0C36\u0C40\u0C32\u0C24 \u0C2E\u0C3E\u0C30\u0C41\u0C24\u0C41\u0C02\u0C26\u0C3F.`,
      clinical_meaning: `CPIC \u0C38\u0C4D\u0C25\u0C3E\u0C2F\u0C3F ${input.cpic_level} \u0C06\u0C27\u0C3E\u0C30\u0C02\u0C17\u0C3E, \u0C08 ${input.phenotype} \u0C2B\u0C40\u0C28\u0C4B\u0C1F\u0C48\u0C2A\u0C4D ${input.severity} \u0C24\u0C40\u0C35\u0C4D\u0C30\u0C24\u0C28\u0C41 \u0C15\u0C32\u0C3F\u0C17\u0C3F \u0C09\u0C02\u0C1F\u0C41\u0C02\u0C26\u0C3F. \u0C28\u0C2E\u0C4D\u0C2E\u0C15\u0C02 \u0C38\u0C4D\u0C15\u0C4B\u0C30\u0C4D: ${input.confidence_score}.`,
      safety_advice: getRiskAdvice(input.risk_label, input.drug, "clinician", "te-IN"),
      when_to_consult: `\u0C2B\u0C3E\u0C30\u0C4D\u0C2E\u0C15\u0C4B\u0C1C\u0C46\u0C28\u0C4B\u0C2E\u0C3F\u0C15\u0C4D\u0C38\u0C4D \u0C28\u0C3F\u0C2A\u0C41\u0C23\u0C41\u0C32\u0C24\u0C4B \u0C38\u0C02\u0C2A\u0C4D\u0C30\u0C26\u0C3F\u0C02\u0C2A\u0C41\u0C32\u0C41 \u0C38\u0C3F\u0C2B\u0C3E\u0C30\u0C38\u0C41 \u0C1A\u0C47\u0C2F\u0C2C\u0C21\u0C3F\u0C02\u0C26\u0C3F.`,
    }),
    patient: (input) => ({
      summary: `\u0C2E\u0C40 \u0C36\u0C30\u0C40\u0C30\u0C02 ${input.drug} \u0C2E\u0C02\u0C26\u0C41\u0C28\u0C41 \u0C07\u0C24\u0C30\u0C41\u0C32 \u0C15\u0C02\u0C1F\u0C47 \u0C35\u0C47\u0C30\u0C41\u0C17\u0C3E \u0C2A\u0C4D\u0C30\u0C15\u0C4D\u0C30\u0C3F\u0C2F \u0C1A\u0C47\u0C38\u0C4D\u0C24\u0C41\u0C02\u0C26\u0C3F.`,
      mechanism: `${input.gene} \u0C1C\u0C40\u0C28\u0C4D \u0C2E\u0C40 \u0C36\u0C30\u0C40\u0C30\u0C02\u0C32\u0C4B ${input.drug} \u0C2E\u0C02\u0C26\u0C41\u0C28\u0C41 \u0C35\u0C3F\u0C2D\u0C1C\u0C3F\u0C02\u0C1A\u0C21\u0C3E\u0C28\u0C3F\u0C15\u0C3F \u0C38\u0C39\u0C3E\u0C2F\u0C02 \u0C1A\u0C47\u0C38\u0C4D\u0C24\u0C41\u0C02\u0C26\u0C3F.`,
      clinical_meaning: `\u0C26\u0C40\u0C28\u0C3F \u0C05\u0C30\u0C4D\u0C25\u0C02 ${input.drug} \u0C2E\u0C40\u0C15\u0C41 \u0C35\u0C47\u0C30\u0C41\u0C17\u0C3E \u0C2A\u0C28\u0C3F \u0C1A\u0C47\u0C2F\u0C35\u0C1A\u0C4D\u0C1A\u0C41. \u0C2E\u0C40 \u0C35\u0C48\u0C26\u0C4D\u0C2F\u0C41\u0C21\u0C41 \u0C26\u0C40\u0C28\u0C3F\u0C28\u0C3F "${input.risk_label}" \u0C05\u0C28\u0C3F \u0C30\u0C47\u0C1F\u0C4D \u0C1A\u0C47\u0C36\u0C3E\u0C30\u0C41.`,
      safety_advice: getRiskAdvice(input.risk_label, input.drug, "patient", "te-IN"),
      when_to_consult: `\u0C08 \u0C2E\u0C02\u0C26\u0C41 \u0C24\u0C40\u0C38\u0C41\u0C15\u0C4B\u0C35\u0C21\u0C3E\u0C28\u0C3F\u0C15\u0C3F \u0C2E\u0C41\u0C02\u0C26\u0C41 \u0C2E\u0C40 \u0C35\u0C48\u0C26\u0C4D\u0C2F\u0C41\u0C21\u0C3F\u0C24\u0C4B \u0C2E\u0C3E\u0C1F\u0C4D\u0C32\u0C3E\u0C21\u0C02\u0C21\u0C3F.`,
    }),
  },
  "mr-IN": {
    clinician: (input) => ({
      summary: `\u0930\u0941\u0917\u094D\u0923 ${input.gene} \u0938\u093E\u0920\u0940 ${input.phenotype} \u092B\u0947\u0928\u094B\u091F\u093E\u0907\u092A \u0926\u0930\u094D\u0936\u0935\u093F\u0924\u094B, \u091C\u094D\u092F\u093E\u092E\u0941\u0933\u0947 ${input.drug} \u091A\u092F\u093E\u092A\u091A\u092F\u093E\u0935\u0930 \u092A\u0930\u093F\u0923\u093E\u092E \u0939\u094B\u0924\u094B. \u091C\u094B\u0916\u0940\u092E \u0935\u0930\u094D\u0917\u0940\u0915\u0930\u0923: ${input.risk_label} (CPIC \u0938\u094D\u0924\u0930 ${input.cpic_level}).`,
      mechanism: `${input.phenotype} \u092B\u0947\u0928\u094B\u091F\u093E\u0907\u092A\u092E\u0927\u094D\u092F\u0947 ${input.gene} \u090F\u0928\u094D\u091D\u093E\u0907\u092E \u0915\u094D\u0930\u093F\u092F\u093E\u0936\u0940\u0932\u0924\u093E \u092C\u0926\u0932\u0924\u0947.`,
      clinical_meaning: `CPIC \u0938\u094D\u0924\u0930 ${input.cpic_level} \u092A\u0941\u0930\u093E\u0935\u094D\u092F\u093E\u0902\u0935\u0930 \u0906\u0927\u093E\u0930\u093F\u0924, \u0939\u093E ${input.phenotype} \u092B\u0947\u0928\u094B\u091F\u093E\u0907\u092A ${input.severity} \u0924\u0940\u0935\u094D\u0930\u0924\u093E \u0927\u094B\u0915\u093E \u0935\u093E\u0939\u0924\u094B. \u0935\u093F\u0936\u094D\u0935\u093E\u0938 \u0938\u094D\u0915\u094B\u0930: ${input.confidence_score}.`,
      safety_advice: getRiskAdvice(input.risk_label, input.drug, "clinician", "mr-IN"),
      when_to_consult: `\u092B\u093E\u0930\u094D\u092E\u093E\u0915\u094B\u091C\u0947\u0928\u094B\u092E\u093F\u0915\u094D\u0938 \u0924\u091C\u094D\u091E\u093E\u0902\u0936\u0940 \u0938\u0932\u094D\u0932\u093E \u0918\u0947\u0923\u094D\u092F\u093E\u091A\u0940 \u0936\u093F\u092B\u093E\u0930\u0938 \u0915\u0947\u0932\u0940 \u091C\u093E\u0924\u0947.`,
    }),
    patient: (input) => ({
      summary: `\u0924\u0941\u092E\u091A\u0947 \u0936\u0930\u0940\u0930 ${input.drug} \u0939\u0947 \u0914\u0937\u0927 \u0907\u0924\u0930\u093E\u0902\u092A\u0947\u0915\u094D\u0937\u093E \u0935\u0947\u0917\u0933\u094D\u092F\u093E \u092A\u094D\u0930\u0915\u093E\u0930\u0947 \u092A\u094D\u0930\u0915\u094D\u0930\u093F\u092F\u093E \u0915\u0930\u0924\u0947.`,
      mechanism: `${input.gene} \u091C\u0940\u0928 \u0924\u0941\u092E\u091A\u094D\u092F\u093E \u0936\u0930\u0940\u0930\u093E\u0932\u093E ${input.drug} \u0924\u094B\u0921\u0923\u094D\u092F\u093E\u0938 \u092E\u0926\u0924 \u0915\u0930\u0924\u0947.`,
      clinical_meaning: `\u092F\u093E\u091A\u093E \u0905\u0930\u094D\u0925 \u0905\u0938\u093E \u0906\u0939\u0947 \u0915\u0940 ${input.drug} \u0924\u0941\u092E\u094D\u0939\u093E\u0932\u093E \u0935\u0947\u0917\u0933\u094D\u092F\u093E \u092A\u094D\u0930\u0915\u093E\u0930\u0947 \u092A\u094D\u0930\u092D\u093E\u0935\u093F\u0924 \u0915\u0930\u0942 \u0936\u0915\u0924\u0947. \u0924\u0941\u092E\u091A\u094D\u092F\u093E \u0921\u0949\u0915\u094D\u091F\u0930\u093E\u0902\u0928\u0940 \u0939\u0947 "${input.risk_label}" \u0905\u0938\u0947 \u0930\u0947\u091F \u0915\u0947\u0932\u0947 \u0906\u0939\u0947.`,
      safety_advice: getRiskAdvice(input.risk_label, input.drug, "patient", "mr-IN"),
      when_to_consult: `\u0939\u0947 \u0914\u0937\u0927 \u0918\u0947\u0923\u094D\u092F\u093E\u0906\u0927\u0940 \u0924\u0941\u092E\u091A\u094D\u092F\u093E \u0921\u0949\u0915\u094D\u091F\u0930\u093E\u0902\u0936\u0940 \u092C\u094B\u0932\u093E.`,
    }),
  },
  "gu-IN": {
    clinician: (input) => ({
      summary: `\u0AA6\u0AB0\u0ACD\u0AA6\u0AC0 ${input.gene} \u0AAE\u0ABE\u0A9F\u0AC7 ${input.phenotype} \u0AAB\u0AC0\u0AA8\u0ACB\u0A9F\u0ABE\u0A87\u0AAA \u0AA6\u0AB0\u0ACD\u0AB6\u0ABE\u0AB5\u0AC7 \u0A9B\u0AC7, \u0A9C\u0AC7 ${input.drug} \u0A9A\u0AAF\u0ABE\u0AAA\u0A9A\u0AAF\u0AA8\u0AC7 \u0A85\u0AB8\u0AB0 \u0A95\u0AB0\u0AC7 \u0A9B\u0AC7. \u0A9C\u0ACB\u0A96\u0AAE \u0AB5\u0AB0\u0ACD\u0A97\u0AC0\u0A95\u0AB0\u0AA3: ${input.risk_label} (CPIC \u0AB8\u0ACD\u0AA4\u0AB0 ${input.cpic_level}).`,
      mechanism: `${input.phenotype} \u0AAB\u0AC0\u0AA8\u0ACB\u0A9F\u0ABE\u0A87\u0AAA\u0AAE\u0ABE\u0A82 ${input.gene} \u0A8F\u0AA8\u0ACD\u0A9D\u0ABE\u0A87\u0AAE \u0AAA\u0ACD\u0AB0\u0AB5\u0AC3\u0AA4\u0ACD\u0AA4\u0ABF \u0AAC\u0AA6\u0AB2\u0ABE\u0AAF \u0A9B\u0AC7.`,
      clinical_meaning: `CPIC \u0AB8\u0ACD\u0AA4\u0AB0 ${input.cpic_level} \u0AAA\u0AC1\u0AB0\u0ABE\u0AB5\u0ABE \u0AAA\u0ACD\u0AB0\u0AAE\u0ABE\u0AA3\u0AC7, \u0A86 ${input.phenotype} \u0AAB\u0AC0\u0AA8\u0ACB\u0A9F\u0ABE\u0A87\u0AAA ${input.severity} \u0A97\u0A82\u0AAD\u0AC0\u0AB0\u0AA4\u0ABE \u0AA7\u0AB0\u0ABE\u0AB5\u0AC7 \u0A9B\u0AC7. \u0AB5\u0ABF\u0AB6\u0ACD\u0AB5\u0ABE\u0AB8 \u0AB8\u0ACD\u0A95\u0ACB\u0AB0: ${input.confidence_score}.`,
      safety_advice: getRiskAdvice(input.risk_label, input.drug, "clinician", "gu-IN"),
      when_to_consult: `\u0AAB\u0ABE\u0AB0\u0ACD\u0AAE\u0ABE\u0A95\u0ACB\u0A9C\u0AC7\u0AA8\u0ACB\u0AAE\u0ABF\u0A95\u0ACD\u0AB8 \u0AA8\u0ABF\u0AB7\u0ACD\u0AA3\u0ABE\u0AA4 \u0AB8\u0ABE\u0AA5\u0AC7 \u0AB8\u0AB2\u0ABE\u0AB9 \u0AB2\u0AC7\u0AB5\u0ABE\u0AA8\u0AC0 \u0AAB\u0ABE\u0AB0\u0AB8 \u0A95\u0AB0\u0AB5\u0ABE\u0AAE\u0ABE\u0A82 \u0A86\u0AB5\u0AC0 \u0A9B\u0AC7.`,
    }),
    patient: (input) => ({
      summary: `\u0AA4\u0AAE\u0ABE\u0AB0\u0AC1\u0A82 \u0AB6\u0AB0\u0AC0\u0AB0 ${input.drug} \u0AA6\u0AB5\u0ABE\u0AA8\u0AC7 \u0AAC\u0AC0\u0A9C\u0ABE\u0A93 \u0A95\u0AB0\u0AA4\u0ABE\u0A82 \u0A85\u0AB2\u0A97 \u0AB0\u0AC0\u0AA4\u0AC7 \u0AAA\u0ACD\u0AB0\u0A95\u0ACD\u0AB0\u0ABF\u0AAF\u0ABE \u0A95\u0AB0\u0AC7 \u0A9B\u0AC7.`,
      mechanism: `${input.gene} \u0A9C\u0AC0\u0AA8 \u0AA4\u0AAE\u0ABE\u0AB0\u0ABE \u0AB6\u0AB0\u0AC0\u0AB0\u0AAE\u0ABE\u0A82 ${input.drug} \u0AA6\u0AB5\u0ABE\u0AA8\u0AC7 \u0AA4\u0ACB\u0AA1\u0AB5\u0ABE\u0AAE\u0ABE\u0A82 \u0AAE\u0AA6\u0AA6 \u0A95\u0AB0\u0AC7 \u0A9B\u0AC7.`,
      clinical_meaning: `\u0A86\u0AA8\u0ACB \u0A85\u0AB0\u0ACD\u0AA5 \u0A8F \u0A9B\u0AC7 \u0A95\u0AC7 ${input.drug} \u0AA4\u0AAE\u0ABE\u0AB0\u0ABE \u0AAE\u0ABE\u0A9F\u0AC7 \u0A85\u0AB2\u0A97 \u0AB0\u0AC0\u0AA4\u0AC7 \u0A85\u0AB8\u0AB0 \u0A95\u0AB0\u0AC0 \u0AB6\u0A95\u0AC7 \u0A9B\u0AC7. \u0AA4\u0AAE\u0ABE\u0AB0\u0ABE \u0AA1\u0ACB\u0A95\u0ACD\u0A9F\u0AB0\u0AC7 \u0A86\u0AA8\u0AC7 "${input.risk_label}" \u0AA4\u0AB0\u0AC0\u0A95\u0AC7 \u0AB0\u0AC7\u0A9F \u0A95\u0AB0\u0ACD\u0AAF\u0AC1\u0A82 \u0A9B\u0AC7.`,
      safety_advice: getRiskAdvice(input.risk_label, input.drug, "patient", "gu-IN"),
      when_to_consult: `\u0A86 \u0AA6\u0AB5\u0ABE \u0AB2\u0AC7\u0AA4\u0ABE \u0AAA\u0AB9\u0AC7\u0AB2\u0ABE\u0A82 \u0AA4\u0AAE\u0ABE\u0AB0\u0ABE \u0AA1\u0ACB\u0A95\u0ACD\u0A9F\u0AB0 \u0AB8\u0ABE\u0AA5\u0AC7 \u0AB5\u0ABE\u0AA4 \u0A95\u0AB0\u0ACB.`,
    }),
  },
}

function getMechanismDetail(phenotype: string, drug: string): string {
  switch (phenotype) {
    case "PM": return `significantly reduced or absent metabolism of ${drug}, leading to potential drug accumulation or lack of active metabolite formation`
    case "IM": return `reduced metabolism of ${drug}, which may lead to altered drug levels`
    case "NM": return `normal expected metabolism of ${drug}`
    case "RM": return `increased metabolism of ${drug}, potentially leading to enhanced drug activation`
    case "URM": return `greatly increased metabolism of ${drug}, which may cause dangerously high levels of active metabolites`
    default: return `uncertain metabolism of ${drug} due to insufficient genotype data`
  }
}

function getPhenotypeSimple(phenotype: string): string {
  switch (phenotype) {
    case "PM": return "much slower than usual"
    case "IM": return "somewhat slower than usual"
    case "NM": return "at a normal pace"
    case "RM": return "faster than usual"
    case "URM": return "much faster than usual"
    default: return "in a way we cannot fully determine"
  }
}

function getPhenotypeSimpleHindi(phenotype: string): string {
  switch (phenotype) {
    case "PM": return "\u0938\u093E\u092E\u093E\u0928\u094D\u092F \u0938\u0947 \u092C\u0939\u0941\u0924 \u0927\u0940\u092E\u0940 \u0917\u0924\u093F \u0938\u0947"
    case "IM": return "\u0938\u093E\u092E\u093E\u0928\u094D\u092F \u0938\u0947 \u0915\u0941\u091B \u0927\u0940\u092E\u0940 \u0917\u0924\u093F \u0938\u0947"
    case "NM": return "\u0938\u093E\u092E\u093E\u0928\u094D\u092F \u0917\u0924\u093F \u0938\u0947"
    case "RM": return "\u0938\u093E\u092E\u093E\u0928\u094D\u092F \u0938\u0947 \u0924\u0947\u091C\u093C \u0917\u0924\u093F \u0938\u0947"
    case "URM": return "\u0938\u093E\u092E\u093E\u0928\u094D\u092F \u0938\u0947 \u092C\u0939\u0941\u0924 \u0924\u0947\u091C\u093C \u0917\u0924\u093F \u0938\u0947"
    default: return "\u0905\u0928\u093F\u0936\u094D\u091A\u093F\u0924 \u0917\u0924\u093F \u0938\u0947"
  }
}

function getPatientImpact(riskLabel: string): string {
  switch (riskLabel) {
    case "Safe": return "work normally"
    case "Adjust Dosage": return "need a different dose than the standard one"
    case "Monitor Closely": return "require extra monitoring while you take it"
    case "Toxic": return "be potentially harmful at normal doses"
    case "Contraindicated": return "not be suitable for you at all"
    default: return "work differently than expected"
  }
}

function getPatientImpactHindi(riskLabel: string): string {
  switch (riskLabel) {
    case "Safe": return "\u0938\u093E\u092E\u093E\u0928\u094D\u092F \u0930\u0942\u092A \u0938\u0947 \u0915\u093E\u092E \u0915\u0930\u0947"
    case "Adjust Dosage": return "\u0916\u0941\u0930\u093E\u0915 \u092E\u0947\u0902 \u092C\u0926\u0932\u093E\u0935 \u0915\u0940 \u091C\u093C\u0930\u0942\u0930\u0924 \u0939\u094B"
    case "Monitor Closely": return "\u0905\u0924\u093F\u0930\u093F\u0915\u094D\u0924 \u0928\u093F\u0917\u0930\u093E\u0928\u0940 \u0915\u0940 \u091C\u093C\u0930\u0942\u0930\u0924 \u0939\u094B"
    case "Toxic": return "\u0938\u093E\u092E\u093E\u0928\u094D\u092F \u0916\u0941\u0930\u093E\u0915 \u092A\u0930 \u0939\u093E\u0928\u093F\u0915\u093E\u0930\u0915 \u0939\u094B"
    case "Contraindicated": return "\u0906\u092A\u0915\u0947 \u0932\u093F\u090F \u0909\u092A\u092F\u0941\u0915\u094D\u0924 \u0928 \u0939\u094B"
    default: return "\u0905\u092A\u0947\u0915\u094D\u0937\u093E \u0938\u0947 \u0905\u0932\u0917 \u0924\u0930\u0940\u0915\u0947 \u0938\u0947 \u0915\u093E\u092E \u0915\u0930\u0947"
  }
}

function getRiskAdvice(riskLabel: string, drug: string, view: "clinician" | "patient", lang: string): string {
  if (lang === "en-US" || !["hi-IN", "bn-IN", "ta-IN", "te-IN", "mr-IN", "gu-IN"].includes(lang)) {
    if (view === "clinician") {
      switch (riskLabel) {
        case "Safe": return `Standard ${drug} therapy may be continued with routine monitoring.`
        case "Adjust Dosage": return `Consider dose modification for ${drug}. Refer to CPIC guidelines for specific dosing.`
        case "Monitor Closely": return `Enhanced clinical and laboratory monitoring required for ${drug} therapy.`
        case "Toxic": return `High toxicity risk with ${drug}. Consider alternative therapy or significant dose reduction.`
        case "Contraindicated": return `${drug} is contraindicated based on pharmacogenomic profile. Switch to recommended alternative.`
        default: return `Exercise clinical judgment with ${drug} administration.`
      }
    }
    switch (riskLabel) {
      case "Safe": return `${drug} appears safe for you based on your genetic profile. Continue as prescribed.`
      case "Adjust Dosage": return `You may need a different dose of ${drug}. Your doctor will decide the right amount.`
      case "Monitor Closely": return `If you take ${drug}, your doctor will want to check on you more often.`
      case "Toxic": return `${drug} may be harmful for you. Your doctor will likely suggest a different medicine.`
      case "Contraindicated": return `${drug} is not recommended for you. Ask your doctor about safer alternatives.`
      default: return `Discuss ${drug} with your doctor before taking it.`
    }
  }
  // For Indian languages, return Hindi-style advice as fallback
  if (view === "patient") {
    switch (riskLabel) {
      case "Safe": return `${drug} \u0906\u092A\u0915\u0947 \u0932\u093F\u090F \u0938\u0941\u0930\u0915\u094D\u0937\u093F\u0924 \u092A\u094D\u0930\u0924\u0940\u0924 \u0939\u094B\u0924\u0940 \u0939\u0948\u0964`
      case "Adjust Dosage": return `\u0906\u092A\u0915\u094B ${drug} \u0915\u0940 \u0905\u0932\u0917 \u0916\u0941\u0930\u093E\u0915 \u0915\u0940 \u091C\u093C\u0930\u0942\u0930\u0924 \u0939\u094B \u0938\u0915\u0924\u0940 \u0939\u0948\u0964`
      case "Monitor Closely": return `${drug} \u0932\u0947\u0924\u0947 \u0938\u092E\u092F \u0905\u0924\u093F\u0930\u093F\u0915\u094D\u0924 \u0928\u093F\u0917\u0930\u093E\u0928\u0940 \u0915\u0940 \u091C\u093C\u0930\u0942\u0930\u0924 \u0939\u0948\u0964`
      case "Toxic": return `${drug} \u0906\u092A\u0915\u0947 \u0932\u093F\u090F \u0939\u093E\u0928\u093F\u0915\u093E\u0930\u0915 \u0939\u094B \u0938\u0915\u0924\u0940 \u0939\u0948\u0964 \u0935\u093F\u0915\u0932\u094D\u092A \u092A\u0942\u091B\u0947\u0902\u0964`
      case "Contraindicated": return `${drug} \u0906\u092A\u0915\u0947 \u0932\u093F\u090F \u0905\u0928\u0941\u0936\u0902\u0938\u093F\u0924 \u0928\u0939\u0940\u0902 \u0939\u0948\u0964 \u0935\u093F\u0915\u0932\u094D\u092A \u0926\u0935\u093E \u0915\u0947 \u092C\u093E\u0930\u0947 \u092E\u0947\u0902 \u092A\u0942\u091B\u0947\u0902\u0964`
      default: return `${drug} \u0932\u0947\u0928\u0947 \u0938\u0947 \u092A\u0939\u0932\u0947 \u0921\u0949\u0915\u094D\u091F\u0930 \u0938\u0947 \u092C\u093E\u0924 \u0915\u0930\u0947\u0902\u0964`
    }
  }
  switch (riskLabel) {
    case "Safe": return `${drug} \u0915\u0940 \u092E\u093E\u0928\u0915 \u091A\u093F\u0915\u093F\u0924\u094D\u0938\u093E \u091C\u093E\u0930\u0940 \u0930\u0916\u0940 \u091C\u093E \u0938\u0915\u0924\u0940 \u0939\u0948\u0964`
    case "Adjust Dosage": return `${drug} \u0915\u0940 \u0916\u0941\u0930\u093E\u0915 \u0938\u092E\u093E\u092F\u094B\u091C\u0928 \u092A\u0930 \u0935\u093F\u091A\u093E\u0930 \u0915\u0930\u0947\u0902\u0964 CPIC \u0926\u093F\u0936\u093E\u0928\u093F\u0930\u094D\u0926\u0947\u0936 \u0926\u0947\u0916\u0947\u0902\u0964`
    case "Monitor Closely": return `${drug} \u091A\u093F\u0915\u093F\u0924\u094D\u0938\u093E \u0915\u0947 \u0932\u093F\u090F \u092C\u0922\u093C\u0940 \u0939\u0941\u0908 \u0928\u0948\u0926\u093E\u0928\u093F\u0915\u0940 \u0914\u0930 \u092A\u094D\u0930\u092F\u094B\u0917\u0936\u093E\u0932\u093E \u0928\u093F\u0917\u0930\u093E\u0928\u0940 \u0906\u0935\u0936\u094D\u092F\u0915\u0964`
    case "Toxic": return `${drug} \u0915\u0947 \u0938\u093E\u0925 \u0909\u091A\u094D\u091A \u0935\u093F\u0937\u093E\u0915\u094D\u0924\u0924\u093E \u091C\u094B\u0916\u093F\u092E\u0964 \u0935\u093F\u0915\u0932\u094D\u092A \u091A\u093F\u0915\u093F\u0924\u094D\u0938\u093E \u092A\u0930 \u0935\u093F\u091A\u093E\u0930 \u0915\u0930\u0947\u0902\u0964`
    case "Contraindicated": return `\u092B\u093E\u0930\u094D\u092E\u093E\u0915\u094B\u091C\u0947\u0928\u094B\u092E\u093F\u0915 \u092A\u094D\u0930\u094B\u092B\u093E\u0907\u0932 \u0915\u0947 \u0906\u0927\u093E\u0930 \u092A\u0930 ${drug} \u092A\u094D\u0930\u0924\u093F\u092C\u0902\u0927\u093F\u0924 \u0939\u0948\u0964`
    default: return `${drug} \u0915\u0947 \u092A\u094D\u0930\u0936\u093E\u0938\u0928 \u092E\u0947\u0902 \u0928\u0948\u0926\u093E\u0928\u093F\u0915 \u0928\u093F\u0930\u094D\u0923\u092F \u0932\u0947\u0902\u0964`
  }
}

export function generateExplanation(input: ExplanationInput): ExplanationSet {
  const lang = input.preferred_language as LanguageCode
  const templates = LANGUAGE_TEMPLATES[lang] || LANGUAGE_TEMPLATES["en-US"]

  return {
    clinician: templates.clinician(input),
    patient: templates.patient(input),
  }
}
